<?php$return=array();$return["dialogTitle"]="Error";$return["dialogMessage"]="Unable to process your request, please try again.";$mobile=filter_input(INPUT_GET,"mobile");$first_name=filter_input(INPUT_GET,"first_name");$last_name=filter_input(INPUT_GET,"last_name");$address=filter_input(INPUT_GET,"address");$otp=filter_input(INPUT_GET,"otp");if(isset($mobile,$otp,$first_name,$last_name,$address)) {	require_once "class.database.php";	$db=new Database();	if($db->verify_otp($mobile,$otp)) {				$user=$db->find_user($mobile);				if(is_bool($user) && !$user) { // re-code it for editing feature having token						if($db->register_user($mobile,$first_name,$last_name,$address)) {				$return["userData"]=$db->find_user($mobile);				$return["token"]=$db->generate_user_token($mobile);				$return["success"]=true;				$return["dialogTitle"]="Profile setup complete";				$return["dialogMessage"]="Thank you for setting up your profile, please wait while administrator of WeTeam verify your identity.";			} else {				$return["dialogTitle"]="Error";				$return["dialogMessage"]="Unable to register your inforamtion to server, try again.";			}					} else {			$return["dialogTitle"]="Error";			$return["dialogMessage"]="Sorry, this mobile number is already setted their profile.";		}			} else {		$return["dialogTitle"]="Authorization Failed";		$return["dialogMessage"]="Please try again by re-authenticating yourself through one-time password verification.";	}}$json=json_encode($return);header("Content-Length: ".strlen($json));ob_clean();echo $json;